<section section-id="{{ sectionId }}"
     data-lg-scroll-offset="130"
     data-md-scroll-offset="130"
     data-sm-scroll-offset="94"
      class="s-block reviews-sec" >
  <div class="container-sec">
    <div class="head-sec">
                       
                            
                        <h2 class="title-sec " >{{ settings.titlesec }}</h2>
                        
                             
                    </div>
                    <div class="reviews-div">
                        <div class="reviews-container">
                            {% for review in settings.reviews %}
                                <div class="review-card-outer">
                                    <div class="review-card">
                                        <div class="review-card-inner">
                                             <div class="quote-icon">
                                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="28" viewBox="0 0 16 28" fill="none">
                                            <path d="M0.765122 20.2053C0.765122 24.4124 4.17547 27.8228 8.3826 27.8228C12.5897 27.8228 16.0001 24.4124 16.0001 20.2053C16.0001 15.9982 12.5897 12.5879 8.38254 12.5879C7.51786 12.5879 6.69028 12.7386 5.91548 13.0042C7.62972 3.17257 15.2965 -3.16773 8.18942 2.05046C0.308721 7.83686 0.756618 19.9725 0.765499 20.1949C0.765499 20.1984 0.765122 20.2015 0.765122 20.2053Z" fill="#EEEEEE"/>
                                            </svg>
                                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="28" viewBox="0 0 16 28" fill="none">
                                            <path d="M0.765122 20.2053C0.765122 24.4124 4.17547 27.8228 8.3826 27.8228C12.5897 27.8228 16.0001 24.4124 16.0001 20.2053C16.0001 15.9982 12.5897 12.5879 8.38254 12.5879C7.51786 12.5879 6.69028 12.7386 5.91548 13.0042C7.62972 3.17257 15.2965 -3.16773 8.18942 2.05046C0.308721 7.83686 0.756618 19.9725 0.765499 20.1949C0.765499 20.1984 0.765122 20.2015 0.765122 20.2053Z" fill="#EEEEEE"/>
                                            </svg>

                                            </div>
                                            
                                            <div class="stars" id="starsContainer" data-rating="{{review.number}}" data-max-stars="5"></div>

                                            <p class="review-text">
                                                {{review.description}}
                                            </p>

                                        </div>
                                       

                                        <div class="reviewer">
                                            <img src="{{review.personimage}}" alt="{{review.personname}}" class="reviewer-avatar">
                                            <div class="reviewer-info">
                                                <div class="reviewer-name">{{review.personname}}</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            {% endfor %}
                        </div>
                    </div>
  </div>
</section>


<script>

        document.addEventListener("DOMContentLoaded", function(){
            var arrowNextClass = (window.appDirection === 'ltr') ? 'icon-keyboard_arrow_right': 'icon-keyboard_arrow_left';
            var arrowPrevClass = (window.appDirection === 'ltr') ? 'icon-keyboard_arrow_left' : 'icon-keyboard_arrow_right';
                $('[section-id={{ sectionId }}] .reviews-container').slick({
                    slidesToShow: 3,
                    slidesToScroll: 1,
                    infinite: false,
                    autoplay: false,
                    arrows: false,
                    dots: true,
                    rtl: !(window.appDirection === 'ltr'),
                    nextArrow:'<button class="slick-next slick-arrow" aria-label="Next" type="button" style=""><span class="'+arrowNextClass+'"></span></button>',
                    prevArrow:'<button class="slick-prev slick-arrow" aria-label="Previous" type="button" style=""><span class="'+arrowPrevClass+'"></span></button>',
                    responsive: [
                        {
                            breakpoint: 992,
                            settings: {
                                slidesToShow: 2,
                                slidesToScroll: 1
                            }
                        },
                        {
                            breakpoint: 576,
                            settings: {
                                slidesToShow: 1.2,
                                slidesToScroll: 1 ,
                                centerMode: true,
                                centerPadding: '0px', 
                                
                            }
                        }
                    ]
                });
            
        });
    </script>
    <script>
        function renderAllStars() {
            const starsContainers = document.querySelectorAll('.stars');
            
            starsContainers.forEach(container => {
                const rating = parseInt(container.getAttribute('data-rating')) || 0;
                const maxStars = parseInt(container.getAttribute('data-max-stars')) || 5;
                
                container.innerHTML = '';
                
                for (let i = 1; i <= maxStars; i++) {
                    const star = document.createElement('span');
                    star.className = i <= rating ? 'star' : 'star empty';
                    star.textContent = '★';
                    container.appendChild(star);
                }
            });
            
            document.querySelectorAll('.star').forEach(star => {
                star.addEventListener('mouseenter', function() {
                    this.style.transform = 'scale(1.2)';
                    this.style.transition = 'transform 0.2s ease';
                });
                
                star.addEventListener('mouseleave', function() {
                    this.style.transform = 'scale(1)';
                });
            });
        }

        document.addEventListener('DOMContentLoaded', renderAllStars);
    </script>

{% schema %}
{
  "name": {
    "ar": " تقيم العميل",
    "en": "Customer Review"
  },
  "icon": "fa fa-text",
  "display": true,
  "settings": {
    "titlesec": {
                "type": "text",
                "label": {
                    "ar": "عنوان السيكشن ",
                    "en": "Section Title"
                }
            },
    "reviews": {
      "type": "list",
        "maxItems": 15,
        "settings_label": {
            "ar": "التقيمات",
            "en": "Reviews"
        },
        "settings": {  
            "personimage": {
                "type": "image",
                    "label": {
                    "ar": "صورة الشخص",
                    "en": "person image"
                },
                "info": {
                    "ar": "ارفع صورة بحجم 500 * 500",
                    "en": "Upload an image with size 500 * 500"
                }
                
                },
            "personname": {
                "type": "text",
                "label": {
                    "ar": "اسم العميل ",
                    "en": "client name"
                }
            },
            "description": {
            "type": "text",
            "label": {
                "ar": "نص التقييم ",
                "en": "review text"
            }
            },
            "number": {
                "type": "number",
                "label": {
                "ar": "عدد النجوم",
                "en": "stars number"
                },
                "floating_numbers": false,
                "minimum": 1,  
                "maximum": 5  
            }
        }
    }
  }
}
{% endschema %}
